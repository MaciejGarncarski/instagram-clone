generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearch"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model profiles {
  id             String           @id @db.Uuid
  profile_id     Int              @unique @default(autoincrement()) @db.Integer
  username       String?          @unique
  avatar_url     String?
  website        String?
  bio            String?          @db.VarChar
  posts          posts[]
  posts_likes    posts_likes[]
  posts_comments posts_comments[]
}

model posts {
  id             Int              @id @default(autoincrement()) @db.Integer
  author         profiles         @relation(fields: [author_id], references: [id])
  author_id      String           @db.Uuid
  description    String
  created_at     DateTime         @default(now()) @db.Timestamptz()
  img            String
  img_uuid       String           @default(uuid()) @db.Uuid
  posts_likes    posts_likes[]
  posts_comments posts_comments[]
}

model posts_likes {
  id      Int      @id @default(autoincrement()) @db.Integer
  post    posts    @relation(fields: [post_id], references: [id])
  post_id Int      @default(autoincrement()) @db.Integer
  user    profiles @relation(fields: [user_id], references: [id])
  user_id String   @db.Uuid
}

model posts_comments {
  id           Int      @id @default(autoincrement()) @db.Integer
  user         profiles @relation(fields: [user_id], references: [id])
  user_id      String   @db.Uuid
  post         posts    @relation(fields: [post_id], references: [id])
  post_id      Int      @db.Integer
  created_at   DateTime @default(now()) @db.Timestamptz()
  comment_text String   @db.Text
}
